import{l as b,a as I,s as h}from"./app-dDW-M8-3.js";import"./site-navbar-HLDpydEW.js";function q(){const u=document.getElementById("authAlert"),c=document.getElementById("loginView"),m=document.getElementById("signupView"),B=document.getElementById("toSignup"),L=document.getElementById("toLogin"),d=document.getElementById("loginForm"),g=document.getElementById("signupForm"),y="main.html";function n(e,t){e.classList.toggle("d-none",!t)}let p;function r(e){u.textContent=e||"",u.classList.remove("d-none"),clearTimeout(p),p=setTimeout(s,5e3)}function s(){u.classList.add("d-none"),u.textContent="",clearTimeout(p)}function l(e,t){const o=e?.querySelector('[type="submit"]');o&&(o.disabled=t)}B?.addEventListener("click",e=>{e.preventDefault(),s(),n(c,!1),n(loginWelcome,!1),n(m,!0),n(signupWelcome,!0),m?.querySelector("input")?.focus()}),L?.addEventListener("click",e=>{e.preventDefault(),s(),n(m,!1),n(signupWelcome,!1),n(c,!0),n(loginWelcome,!0),c?.querySelector("input")?.focus()}),d?.addEventListener("submit",async e=>{e.preventDefault(),s();const t=document.querySelector("#loginEmail")?.value?.trim()??"",o=document.querySelector("#loginPassword")?.value??"";if(!t||!o){r("Please enter your email and password.");return}l(d,!0);try{await b(t,o),location.href=y}catch(i){r(I(i)),console.error(i)}finally{l(d,!1)}}),g?.addEventListener("submit",async e=>{e.preventDefault(),s();const t=document.getElementById("signupSet"),o=document.getElementById("signupAge");document.getElementById("setError").textContent="",document.getElementById("ageError").textContent="",t.classList.remove("input-error"),o.classList.remove("input-error");const i=document.querySelector("#signupUsername")?.value?.trim()??"",E=document.querySelector("#signupEmail")?.value?.trim()??"",f=document.querySelector("#signupPassword")?.value??"",v=document.querySelector("#signupConfirmPassword")?.value??"",S=document.querySelector("#signupSet")?.value?.trim()??"",a=parseInt(document.querySelector("#signupAge")?.value??"");if(!i||!E||!f||!v){r("Please fill in all fields.");return}if(f!==v){r("Passwords do not match.");return}if(!/^[a-d]$/i.test(S)){document.getElementById("setError").textContent="Set must be a letter between A and D.",t.classList.add("input-error");return}if(isNaN(a)||a<17||a>100){document.getElementById("ageError").textContent="Age must be between 17 and 100.",o.classList.add("input-error");return}l(g,!0);try{await h(i,E,f,{set:`Set ${S.toUpperCase()}`,age:a}),location.href=y}catch(w){r(I(w)),console.error(w)}finally{l(g,!1)}})}document.addEventListener("DOMContentLoaded",q);
